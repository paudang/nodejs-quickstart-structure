const { GraphQLError } = require('graphql');
const userController = require('../../controllers/userController');

const userResolvers = {
  Query: {
    getAllUsers: async () => {
      try {
        return await userController.getUsers();
      } catch (error) {
        throw new GraphQLError(error.message || 'Internal server error', { extensions: { code: 'INTERNAL_SERVER_ERROR' } });
      }
    }
  },
  Mutation: {
    createUser: async (_, { name, email }) => {
      try {
        return await userController.createUser({ name, email });
      } catch (error) {
        throw new GraphQLError(error.message || 'Internal server error', { extensions: { code: 'INTERNAL_SERVER_ERROR' } });
      }
    }
  }
};

module.exports = { userResolvers };
